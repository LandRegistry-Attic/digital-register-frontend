{% extends "imports.html" %}

{% block body %}

<h1 class="heading-xlarge collapse-bottom">Summary of title {{ title.number }}</h1>
<p class="expand-bottom">This title was last changed on <b>{{ title.last_changed | date }}</b> at <b>{{ title.last_changed | time }}</b></p>

<div class="grid-row">

  <div class="column-two-thirds">

    <p class="lede collapse-top">
      {% if title.address_lines %}
        {{ '<br>'.join(title.address_lines)|safe }}
      {% else %}
        Not Available
      {% endif %}
    </p>

    <div id="map">
      <div class="summary">
        The map relies on JavaScript being enabled in your browser.
      </div>
    </div>

    <dl class="definition-tabular">
      <dt>Owner{{ title.proprietors|length|pluralize }}</dt>
      <dd>
        {% for proprietor in title.proprietors %}
          <h5 class="collapse-top expand-bottom-half">
            <span class="heading-small">{{ proprietor.name }}</span>{{ proprietor.name_extra_info }}
          </h5>
          {% if proprietor.co_reg_no %}
            <div class="grid-row expand-bottom-half">
              <div class="address">
                {{ proprietor.co_reg_no }}
              </div>
              {% if proprietor.company_location %}
                <div class="sub-address">
                  {{ proprietor.company_location }}
                </div>
              {% endif %}
            </div>
          {% endif %}
          {% for address in proprietor.addresses %}
            <div class="grid-row expand-bottom-half">
              <div class="address">
                {{ '<br>'.join(address.lines)|safe }}
              </div>
            </div>
          {% endfor %}
        {% endfor %}
      </dd>

      {% if title.lenders %}
        <dt>Lender{{ title.lenders|length|pluralize }}</dt>
        <dd>
          {% for lender in title.lenders %}
              <h5 class="collapse-top expand-bottom-half">
                <span class="heading-small">{{ lender.name }}</span>{{ lender.name_extra_info }}
              </h5>
              {% if lender.co_reg_no %}
                <div class="grid-row expand-bottom-half">
                  <div class="address">
                    {{ lender.co_reg_no }}
                  </div>
                </div>
              {% endif %}
              {% if lender.company_location %}
                <div class="grid-row expand-bottom-half">
                  <div class="sub-address">
                    {{ lender.company_location }}
                  </div>
                </div>
              {% endif %}
              {% for address in lender.addresses %}
                <div class="grid-row expand-bottom-half">
                  <div class="address">
                    {{ '<br>'.join(address.lines)|safe }}
                  </div>
                </div>
              {% endfor %}
          {% endfor %}
        </dd>
      {% endif %}

      <dt>Tenure type</dt>
      <dd><b>{{ title.tenure }}</b></dd>

      {% if title.ppi_data %}
        <dt>Price paid/stated</dt>
        <dd>
          <b>{{ title.ppi_data }}</b>
        </dd>
      {% endif %}
    </dl>

  </div>

  <div class="column-third printhidden">

    <div class="summary js-stick-at-top-when-scrolling">
      <div class="icon-print">
        <a href="javascript:window.print();">Print this page</a>
      </div>
    </div>

  </div>
</div>

<div class="grid-row">
  <div class="column-two-thirds">
    <div class="legal-division--top legal-division--bottom">
      <div class="text printhidden">

        <h6 class="heading-medium">What next</h6>
        <ul>
          <li><a href="/title-search">Search for another title using this service</a></li>
          <li><a href="https://gov.uk">Return to GOV.UK</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

{% endblock %}

{% block js_bottom %}
<script type='text/javascript'>
    var indexData = {{ title.indexPolygon | tojson }}
</script>
<script src="../static/javascripts/map.js"></script>
{% endblock %}
